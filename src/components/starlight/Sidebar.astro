---
import type { Props } from '@astrojs/starlight/props';

const { sidebar } = Astro.props;
const currentPath = Astro.url.pathname;

const isCurrentPage = (path: string) => {
  return currentPath === path || currentPath === path + '/';
};
---

<div class="sl-sidebar">
  <div class="top-level-nav">
    <a href="/" class="nav-item top-level-item" aria-current={isCurrentPage('/') ? 'page' : undefined}>Home</a>
    <a href="/getting-started" class="nav-item top-level-item" aria-current={isCurrentPage('/getting-started') ? 'page' : undefined}>Getting Started</a>
    <a href="/design-tokens" class="nav-item top-level-item" aria-current={isCurrentPage('/design-tokens') ? 'page' : undefined}>Design Tokens</a>
  </div>

  <div class="section-divider"></div>

  <div class="nav-section">
    <div class="section-header">
      <span>FOUNDATIONS</span>
    </div>
    <div class="nav-items">
      <a href="/foundations/colors" class="nav-item" aria-current={isCurrentPage('/foundations/colors') ? 'page' : undefined}>Colors</a>
      <a href="/foundations/typography" class="nav-item" aria-current={isCurrentPage('/foundations/typography') ? 'page' : undefined}>Typography</a>
      <a href="/foundations/border-radius" class="nav-item" aria-current={isCurrentPage('/foundations/border-radius') ? 'page' : undefined}>Border Radius</a>
      <a href="/foundations/elevation" class="nav-item" aria-current={isCurrentPage('/foundations/elevation') ? 'page' : undefined}>Elevation</a>
      <a href="/foundations/spacing" class="nav-item" aria-current={isCurrentPage('/foundations/spacing') ? 'page' : undefined}>Spacing</a>
      <a href="/foundations/icons" class="nav-item" aria-current={isCurrentPage('/foundations/icons') ? 'page' : undefined}>Icons</a>
      <a href="/foundations/grids" class="nav-item" aria-current={isCurrentPage('/foundations/grids') ? 'page' : undefined}>Grids</a>
    </div>
  </div>

  <div class="section-divider"></div>

  <div class="nav-section">
    <div class="section-header">
      <span>COMPONENTS</span>
    </div>
    <div class="nav-items">
      <a href="/components/accordion" class="nav-item" aria-current={isCurrentPage('/components/accordion') ? 'page' : undefined}>Accordion</a>
      <a href="/components/action-list" class="nav-item" aria-current={isCurrentPage('/components/action-list') ? 'page' : undefined}>Action List</a>
      <a href="/components/action-menu" class="nav-item" aria-current={isCurrentPage('/components/action-menu') ? 'page' : undefined}>Action Menu</a>
      <a href="/components/alert" class="nav-item" aria-current={isCurrentPage('/components/alert') ? 'page' : undefined}>Alert</a>
      <a href="/components/avatar" class="nav-item" aria-current={isCurrentPage('/components/avatar') ? 'page' : undefined}>Avatar</a>
      <a href="/components/badge" class="nav-item" aria-current={isCurrentPage('/components/badge') ? 'page' : undefined}>Badge</a>
      <a href="/components/breadcrumbs" class="nav-item" aria-current={isCurrentPage('/components/breadcrumbs') ? 'page' : undefined}>Breadcrumbs</a>
      <a href="/components/button" class="nav-item" aria-current={isCurrentPage('/components/button') ? 'page' : undefined}>Button</a>
      <a href="/components/card" class="nav-item" aria-current={isCurrentPage('/components/card') ? 'page' : undefined}>Card</a>
      <a href="/components/code" class="nav-item" aria-current={isCurrentPage('/components/code') ? 'page' : undefined}>Code</a>
      <a href="/components/command-menu" class="nav-item" aria-current={isCurrentPage('/components/command-menu') ? 'page' : undefined}>Command Menu</a>
      <a href="/components/dialog" class="nav-item" aria-current={isCurrentPage('/components/dialog') ? 'page' : undefined}>Dialog</a>
      <a href="/components/divider" class="nav-item" aria-current={isCurrentPage('/components/divider') ? 'page' : undefined}>Divider</a>
    </div>
  </div>
</div>

<style>
  .sl-sidebar {
    @apply h-full py-2;
  }

  .top-level-nav {
    @apply space-y-0 mb-4;
  }

  .nav-section {
    @apply space-y-0.5;
  }

  .nav-item {
    @apply block py-1.5 px-4 text-[15px] text-[#56565C] hover:text-[#2D2D31] no-underline transition-colors;
  }

  .top-level-item {
    @apply text-[15px] font-normal;
  }

  .section-header {
    @apply px-4 py-2 text-xs font-medium text-[#2D2D31] uppercase tracking-wider;
  }

  .nav-items {
    @apply space-y-0;
  }

  .section-divider {
    @apply my-3 border-t border-gray-100;
  }

  /* Dark mode overrides */
  :global(.dark) .nav-item {
    @apply text-gray-400 hover:text-white;
  }

  :global(.dark) .section-header {
    @apply text-gray-500;
  }

  :global(.dark) .section-divider {
    @apply border-gray-800;
  }

  /* Current page indicator */
  .nav-item[aria-current="page"] {
    @apply bg-[#F4F4F7] text-[#2D2D31] font-normal;
  }

  :global(.dark) .nav-item[aria-current="page"] {
    @apply bg-gray-800 text-white;
  }
</style>